<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roue des Premiers Ministres</title>
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: linear-gradient(135deg, #ff4d6d, #d63384, #6f42c1);
  margin: 0;
  padding: 0;
  overflow: hidden;
  transition: filter 0.5s ease;
}
h1 {
  font-size: 2.2rem;
  color: white;
  margin: 18px 0;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.3);
}
.container {
  display:flex;
  justify-content:center;
  align-items:center;
  gap:20px;
  flex-wrap:wrap;
  padding: 10px;
}
#mac { width: 350px; max-width: 40vmin; flex-shrink: 0; }
#lever-container { position: relative; width: 80px; height: 250px; }
#lever-base { width: 60px; height: 20px; background: #333; border-radius: 10px; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); box-shadow: inset 0 -3px 5px rgba(0,0,0,0.5); }
#lever { width: 22px; height: 140px; background: linear-gradient(to top, #555 0%, #999 100%); position: absolute; bottom: 20px; left: 50%; transform-origin: bottom center; transition: transform 0.28s cubic-bezier(0.33,1,0.68,1); border-radius:6px; box-shadow: 0 6px 12px rgba(0,0,0,0.4); }
#lever::after { content:""; width:50px; height:50px; background: radial-gradient(circle at 30% 30%, red, darkred); border-radius:50%; position:absolute; top:-25px; left:-15px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
#wheel-container { position: relative; width: 78vmin; height: 78vmin; max-width: 600px; max-height: 600px; overflow: visible; }
#wheel { width:100%; height:100%; border-radius:50%; border:5px solid #333; position: relative; transition: transform 5s cubic-bezier(0.33,1,0.68,1); will-change: transform; backface-visibility: hidden; }
.slice-img { position:absolute; border-radius:50%; border:2px solid #fff; object-fit:cover; transform: translate(-50%, -50%); pointer-events: none; }
#wheel .wheel-light { position: absolute; width: 8px; height: 8px; border-radius: 50%; pointer-events: none; border: 1px solid black; }
#spinBtn { padding: 14px 28px; font-size:18px; cursor:pointer; margin-top:18px; border:none; border-radius:10px; background:#ff4d6d; color:#fff; box-shadow:0 6px 14px rgba(0,0,0,0.25); }
#spinBtn:active { transform: scale(.97); }
#spinBtn[disabled] { opacity:.6; cursor:not-allowed; }
#result-overlay { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.85); z-index:50; }
#result-box { background:white; padding:18px; border-radius:14px; display:flex; gap:18px; align-items:center; max-width:900px; width:90%; flex-wrap:wrap; animation: popin .35s ease; }
@keyframes popin { from { transform: scale(.6); opacity:0 } to { transform: scale(1); opacity:1 } }
#result-box img { max-width: 40vw; height:auto; border-radius:10px; position: relative; }
#closeBtn { background:white; color:red; border:2px solid red; padding:10px 18px; border-radius:8px; cursor:pointer; }
#pointer { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-bottom: 30px solid red; z-index: 10; }

/* shake animation pour tout l'Ã©cran */
@keyframes shake {
  0% { transform: translate(0,0); }
  20% { transform: translate(-8px,4px); }
  40% { transform: translate(6px,-3px); }
  60% { transform: translate(-4px,2px); }
  80% { transform: translate(4px,-2px); }
  100% { transform: translate(0,0); }
}
.shake { animation: shake 0.5s ease-in-out infinite; }
</style>
</head>
<body>
<h1>ðŸŽ¡ Roue des Premiers Ministres</h1>
<div class="container">
  <img id="mac" src="mac.png" alt="Mac">
  <div id="lever-container">
    <div id="lever-base"></div>
    <div id="lever"></div>
  </div>
  <div id="wheel-container">
    <div id="pointer"></div>
    <div id="wheel"></div>
  </div>
</div>
<button id="spinBtn">ðŸŽ¡ Tourner la roue</button>
<div id="result-overlay">
  <div id="result-box">
    <div id="img-container"></div>
    <div>
      <h2 id="res-name"></h2>
      <p id="res-text"></p>
      <button id="closeBtn">Fermer</button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const data = [
    {name:"Jordan Bardella", img:"bardella.jpg", text:"Il aurait bien acceptÃ© le poste... mais on lui a dit que ce nâ€™Ã©tait pas un emploi fictif. Du coup, il a refusÃ©."},
    {name:"FranÃ§ois Bayrou", img:"bayrou.jpg", text:"Modem", special:"cross"},
    {name:"Xavier Bertrand", img:"bertrand.jpg", text:"Toujours prompt Ã  donner des leÃ§ons, mais aussi prompt Ã  cumuler les Ã©checs politiques et les revirements opportunistes."},
    {name:"Lucie Castets", img:"castets.jpg", text:"Ã‰conomiste", special:"chaos"},
    {name:"Bernard Cazeneuve", img:"cazeneuve.jpg", text:"Ministre sous Hollande : affaires europÃ©ennes, budget, intÃ©rieur puis Premier ministre. RÃ©sultat : lâ€™UE ne tourne plus, le budget est en faillite et la police tue. Un CV idÃ©al pour Matignon."},
    {name:"GÃ©rald Darmanin", img:"darmanin.jpg", text:"A fait du chantage Ã  une femme pour obtenir des relations sexuelles. Un abus de pouvoir, un viol. Toujours ministre depuis 2020."},
    {name:"FranÃ§ois Baroin", img:"baroin.jpg", text:"Un Ã©ternel notable de droite. Historique terne, toujours lÃ  pour prÃ©server ses intÃ©rÃªts."},
    {name:"Marine Le Pen", img:"lepen.jpg", text:"Saviez-vous quâ€™on peut devenir PremiÃ¨re ministre tout en Ã©tant condamnÃ©e pour dÃ©tournement de fonds publics ? Marine Le Pen, elle, le sait."},
    {name:"Bruno Retailleau", img:"retailleau.jpg", text:"Son slogan : â€˜La France des honnÃªtes gensâ€™. Chef des LR et soutien de Sarkozy, condamnÃ© pour corruption et financement illÃ©gal de campagne. CÃ´tÃ© idÃ©es : une obsession sÃ©curitaire et des politiques ouvertement racistes contre les Ã©trangers et les musulmans."},
    {name:"RaphaÃ«l Glucksmann", img:"glucksmann.jpg", text:"Un autre Macron est possible."},
    {name:"Catherine Vautrin", img:"vautrin.jpg", text:"Potentielle PremiÃ¨re ministre depuis 2020. Mais... est-ce que â€˜potentielle PremiÃ¨re ministreâ€™ est vraiment un mÃ©tier ?"},
    {name:"Michel Barnier", img:"barnier.jpg", text:"Politicien", special:"cross"},
    {name:"Olivier Faure", img:"faure.jpg", text:"Chef du PS, soutien fidÃ¨le de Hollande. Jamais frondeur, toujours suiveur, rÃ´le de normalisation de lâ€™Ã©chec.", special:"faure"},
    {name:"Bruno Le Maire", img:"lemaire.jpg", text:"Longtemps ministre du budget, la France est en faillite. Â« Bruno Demande Â» beaucoup, mais personne ne l'Ã©coute."},
    {name:"SÃ©bastien Lecornu", img:"lecornu.jpg", text:"Issu du mÃªme moule que Macron : carriÃ©riste, technocrate, sans vision pour le peuple."},
    {name:"Christine Lagarde", img:"lagarde.jpg", text:"FMI, austÃ©ritÃ©, crise grecque... Son bilan, câ€™est la casse sociale et la soumission aux marchÃ©s."},
    {name:"Laurent Berger", img:"berger.jpg", text:"La CFDT, sous sa direction, a souvent soutenu lâ€™Ã‰tat et abandonnÃ© les travailleurs."}
  ];

  const wheel = document.getElementById('wheel');
  const spinBtn = document.getElementById('spinBtn');
  const overlay = document.getElementById('result-overlay');
  const nameEl = document.getElementById('res-name');
  const textEl = document.getElementById('res-text');
  const imgContainer = document.getElementById('img-container');
  let currentRotation = 0;
  const sliceAngle = 360 / data.length;

  const colors = ["#FF9999","#99CCFF","#99FF99","#FFFF99","#FF99FF","#FFD699","#CC99FF","#99FFFF","#BDE0FE", "#FF9AAA","#FFD1DC","#C0FFB3","#B3E5FF","#E6B3FF","#FFCCB3","#C2B3FF","#FFF0B3"];
  const wheelColors = data.map((_, i) => colors[i % colors.length]);
  wheel.style.background = `conic-gradient(${wheelColors.map((c,i)=>`${c} ${i*sliceAngle}deg ${(i+1)*sliceAngle}deg`).join(",")})`;

  const imgs = [];
  data.forEach((p, i) => {
    const img = document.createElement('img');
    img.src = p.img;
    img.alt = p.name;
    img.className = 'slice-img';
    img.dataset.index = i;
    wheel.appendChild(img);
    imgs.push(img);
    img.onload = positionImages;
  });

  function positionImages() {
    const w = wheel.clientWidth;
    const center = w / 2;
    const outerRadius = w / 2;
    imgs.forEach((img, i) => {
      const angDeg = i * sliceAngle + sliceAngle / 2;
      const ang = angDeg * Math.PI / 180;
      const radius = outerRadius * 0.7;
      const maxDiameter = 2 * outerRadius * Math.sin(sliceAngle * Math.PI / 360) * 0.5;
      img.style.width = img.style.height = `${maxDiameter}px`;
      const x = center + radius * Math.sin(ang);
      const y = center - radius * Math.cos(ang);
      img.style.left = `${x}px`;
      img.style.top = `${y}px`;
    });
  }
  positionImages();
  window.addEventListener('resize', positionImages);

  const numLights = 120;
  const wheelRadius = wheel.clientWidth / 2;
  const lightColors = ["#fff200", "#ff3d3d", "#3dd1ff", "#ffffff"];
  for (let i = 0; i < numLights; i++) {
    const light = document.createElement('div');
    light.className = 'wheel-light';
    const angle = (i / numLights) * 2 * Math.PI;
    const r = wheelRadius;
    const x = wheelRadius + r * Math.cos(angle);
    const y = wheelRadius + r * Math.sin(angle);
    light.style.left = `${x}px`;
    light.style.top = `${y}px`;
    light.style.background = lightColors[i % lightColors.length];
    light.style.border = '1px solid black';
    wheel.appendChild(light);
  }
  setInterval(() => {
    document.querySelectorAll('.wheel-light').forEach(light => {
      light.style.opacity = (0.5 + Math.random() * 0.5).toFixed(2);
      const size = 6 + Math.random() * 4;
      light.style.width = light.style.height = `${size}px`;
    });
  }, 200);

  const fixedOrder = [
    "Jordan Bardella","Catherine Vautrin","Bernard Cazeneuve","FranÃ§ois Bayrou",
    "FranÃ§ois Baroin","Marine Le Pen","Xavier Bertrand","Lucie Castets",
    "Bruno Retailleau","RaphaÃ«l Glucksmann","Michel Barnier","GÃ©rald Darmanin",
    "Olivier Faure","Bruno Le Maire","SÃ©bastien Lecornu","Christine Lagarde","Laurent Berger"
  ];
  let fixedIndex = 0;

  function spinWheel() {
    if(spinBtn.disabled) return;
    spinBtn.disabled = true;
    const lever = document.getElementById('lever');
    lever.style.transform = `rotate(-30deg)`;
    setTimeout(()=>lever.style.transform='rotate(0deg)',300);

    const personName = fixedOrder[fixedIndex];
    const targetIndex = data.findIndex(p=>p.name===personName);
    fixedIndex = (fixedIndex+1)%fixedOrder.length;

    const spins = 5*360;
    const finalAngle = 360 - (targetIndex*sliceAngle + sliceAngle/2);
    const targetRotation = currentRotation + spins + finalAngle - (currentRotation%360);
    currentRotation = targetRotation;

    wheel.style.transform = `rotate(${currentRotation}deg)`;

    const onEnd = ()=>{
      wheel.removeEventListener('transitionend',onEnd);
      showResult(data[targetIndex]);
      spinBtn.disabled = false;
    };
    wheel.addEventListener('transitionend',onEnd);
  }

  function showResult(person){
    imgContainer.style.position="relative";

    // CAS SPECIAL : Lucie Castets
    if(person.name==="Lucie Castets"){
      spinBtn.disabled = true;
      overlay.style.display = "none";
      imgContainer.innerHTML = "";

      document.body.classList.add('shake'); // tremblement de tout l'Ã©cran

      const chaosScreen = document.createElement('div');
      Object.assign(chaosScreen.style,{
        position:'fixed', top:'0', left:'0', width:'100%', height:'100%',
        background:'rgba(0,0,0,0.9)', display:'flex',
        alignItems:'center', justifyContent:'center',
        zIndex:1000, filter:'grayscale(100%)'
      });

      const chaosImg = document.createElement('img');
      chaosImg.src = person.img;
      chaosImg.alt = person.name;
      chaosImg.style.maxWidth = '40vw';
      chaosImg.style.borderRadius='10px';
      chaosScreen.appendChild(chaosImg);
      document.body.appendChild(chaosScreen);

      setTimeout(()=>{
        const tempBox = document.createElement('div');
        Object.assign(tempBox.style,{
          position:'fixed', top:'50%', left:'50%',
          transform:'translate(-50%,-50%)',
          background:'white', padding:'20px', borderRadius:'10px',
          zIndex:1001, textAlign:'center', fontSize:'1.2rem',
          boxShadow:'0 4px 10px rgba(0,0,0,0.3)'
        });
        tempBox.innerHTML = `<h2>${person.name}</h2>
                             <p>Le rÃ©sultat de la loterie c'est comme le rÃ©sultat des Ã©lections, on nâ€™est pas obligÃ© de le respecter.</p>`;
        document.body.appendChild(tempBox);

        // fermeture automatique aprÃ¨s 3s
        setTimeout(()=>{
          document.body.removeChild(tempBox);
          document.body.removeChild(chaosScreen);
          document.body.classList.remove('shake'); // fin du chaos
          spinBtn.disabled = false;
          spinWheel(); // relance automatique
        },3000);
      },1000);

      return;
    }

    // AUTRES CAS
    overlay.style.display='flex';
    imgContainer.innerHTML=`<img src="${person.img}" alt="${person.name}">`;
    nameEl.textContent = person.name;
    textEl.textContent = person.text;
    textEl.style.color="black";

    if(person.special==="cross"){
      const cross = document.createElement('div');
      cross.style.position="absolute";
      cross.style.top="0"; cross.style.left="0";
      cross.style.width="100%"; cross.style.height="100%";
      cross.style.pointerEvents="none";

      const line1=document.createElement('div');
      const line2=document.createElement('div');
      [line1,line2].forEach(line=>{
        line.style.position="absolute";
        line.style.width="6px"; line.style.height="100%";
        line.style.background="red"; line.style.top="0";
        line.style.left="50%"; line.style.transformOrigin="center";
      });
      line1.style.transform="translateX(-50%) rotate(45deg)";
      line2.style.transform="translateX(-50%) rotate(-45deg)";
      cross.appendChild(line1);
      cross.appendChild(line2);
      imgContainer.appendChild(cross);

      textEl.textContent="On a dÃ©jÃ  essayÃ© !";
      textEl.style.color="red";
    }

    if(person.special==="faure"){
      imgContainer.innerHTML=`<img src="hollande.jpg" alt="Hollande">`;
      setTimeout(()=>{imgContainer.innerHTML=`<img src="${person.img}" alt="${person.name}">`;},1000);
    }
  }

  document.getElementById('closeBtn').addEventListener('click',()=>{overlay.style.display='none';});
  spinBtn.addEventListener('click',spinWheel);
});
</script>
</body>
</html>
