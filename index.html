<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roue des Premiers Ministres</title>
<style>
/* ===== Global ===== */
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: radial-gradient(circle at top left, #ff4d6d, transparent 40%),
              radial-gradient(circle at top right, #d63384, transparent 40%),
              radial-gradient(circle at bottom, #6f42c1, transparent 50%),
              linear-gradient(135deg, #ff4d6d, #d63384, #6f42c1);
  background-blend-mode: screen;
  margin: 0;
  padding: 0;
  overflow: hidden;
  transition: filter 0.5s ease;
}

h1 {
  font-size: 2.5rem;
  color: white;
  margin: 20px 0;
  text-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 20px #ff99cc, 0 0 30px #ff4d6d;
}

#consigne {
  color: white;
  font-style: italic;
  margin-top: 10px;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
  padding: 10px;
}

#mac { width: 350px; max-width: 40vmin; flex-shrink: 0; }

#lever-container { position: relative; width: 80px; height: 250px; cursor: pointer; }
#lever-base { width: 60px; height: 20px; background: #333; border-radius: 10px; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); box-shadow: inset 0 -3px 5px rgba(0,0,0,0.5); }
#lever { width: 22px; height: 140px; background: linear-gradient(to top, #555 0%, #999 100%); position: absolute; bottom: 20px; left: 50%; transform-origin: bottom center; transition: transform 0.28s cubic-bezier(0.33,1,0.68,1); border-radius:6px; box-shadow: 0 6px 12px rgba(0,0,0,0.4); }
#lever::after { content:""; width:50px; height:50px; background: radial-gradient(circle at 30% 30%, red, darkred); border-radius:50%; position:absolute; top:-25px; left:-15px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }

#wheel-container { position: relative; width: 78vmin; height: 78vmin; max-width: 600px; max-height: 600px; overflow: visible; }
#wheel { width: 100%; height: 100%; border-radius: 50%; border:5px solid #fff; position: relative; transition: transform 5s cubic-bezier(0.33,1,0.68,1); will-change: transform; backface-visibility: hidden; box-shadow: 0 0 4px rgba(255,255,255,0.4), 0 0 8px #ff4d6d; }

.slice-img { position:absolute; border-radius:50%; border:2px solid #fff; object-fit: cover; transform: translate(-50%, -50%); pointer-events: auto; cursor:pointer; }
#hover-name { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; font-weight:bold; text-shadow:0 0 6px rgba(0,0,0,0.7); pointer-events:none; font-size:1.2rem; }

#spinBtn { padding: 14px 28px; font-size:18px; cursor:pointer; margin-top:18px; border:none; border-radius:10px; background:#ff4d6d; color:#fff; box-shadow:0 6px 14px rgba(0,0,0,0.4), 0 0 20px #ff99cc; }
#spinBtn:active { transform: scale(.97); }
#spinBtn[disabled] { opacity:.6; cursor:not-allowed; }

#result-overlay { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.85); z-index:50; }
#result-box { background:white; padding:18px; border-radius:14px; display:flex; gap:18px; align-items:center; max-width:900px; width:90%; flex-wrap:wrap; animation: popin .35s ease; box-shadow: none; }
#result-box img { max-width: 40vw; height:auto; border-radius:10px; position: relative; }
#closeBtn { background:white; color:red; border:2px solid red; padding:10px 18px; border-radius:8px; cursor:pointer; }

#pointer {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 20px solid transparent;
  border-right: 20px solid transparent;
  border-top: 30px solid red;
  z-index: 10;
}

@keyframes shake {
  0% { transform: translate(0,0); }
  20% { transform: translate(-8px,4px); }
  40% { transform: translate(6px,-3px); }
  60% { transform: translate(-4px,2px); }
  80% { transform: translate(4px,-2px); }
  100% { transform: translate(0,0); }
}
.shake { animation: shake 0.5s ease-in-out infinite; }

@keyframes rise { from { transform: translateY(100%); opacity:0; } to { transform: translateY(0); opacity:1; } }
.mac-rise { animation: rise 1.5s ease-out forwards; }

@keyframes popin { from { transform: scale(.6); opacity:0 } to { transform: scale(1); opacity:1 } }

/* ===== Responsive Mobile ===== */
@media (max-width: 500px) {
  body {
    overflow-y: auto;
  }
  h1 {
    font-size: 1.8rem;
  }
  #consigne {
    font-size: 0.9rem;
  }
  .container {
    flex-direction: column;
    gap: 4vmin;
    align-items: center;
  }
  #mac {
    width: 50vw;
    max-width: 200px;
  }
  #lever-container {
    width: 50px;
    height: 180px;
  }
  #lever {
    width: 15px;
    height: 100px;
    bottom: 15px;
  }
  #lever::after {
    width: 35px;
    height: 35px;
    top: -17px;
    left: -10px;
  }
  #wheel-container {
    width: 60vmin;
    height: 60vmin;
    max-width: 300px;
    max-height: 300px;
  }
  #spinBtn {
    font-size: 16px;
    padding: 10px 20px;
    margin-top: 2vmin;
  }
  #result-box {
    flex-direction: column;
    text-align: center;
  }
  #result-box img {
    max-width: 80vw;
    height: auto;
  }
  #closeBtn {
    margin-top: 10px;
  }
}

</style>
</head>
<body>
<h1>üé° Roue des Premiers Ministres</h1>
<p id="consigne">Bayrou est tomb√©, mais qui prendra sa place ? Toi aussi prends tes responsabilit√©s : tire sur le levier et nomme un Premier ministre √† la hauteur de l'enjeu !</p>
<div class="container">
  <img id="mac" src="mac.png" alt="Mac">
  <div id="lever-container">
    <div id="lever-base"></div>
    <div id="lever"></div>
  </div>
  <div id="wheel-container">
    <div id="pointer"></div>
    <div id="wheel"></div>
    <div id="hover-name"></div>
  </div>
</div>
<button id="spinBtn">üé° Tourner la roue</button>
<div id="result-overlay">
  <div id="result-box">
    <div id="img-container"></div>
    <div>
      <h2 id="res-name"></h2>
      <p id="res-text"></p>
      <button id="closeBtn">Fermer</button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const data = [
    {name:"Jordan Bardella", img:"bardella.jpg", text:"Il aurait bien accept√© le poste... mais on lui a dit que ce n‚Äô√©tait pas un emploi fictif. Du coup, il a refus√©."},
    {name:"Fran√ßois Bayrou", img:"bayrou.jpg", text:"Modem", special:"cross"},
    {name:"Xavier Bertrand", img:"bertrand.jpg", text:"Toujours prompt √† donner des le√ßons, mais aussi prompt √† cumuler les √©checs politiques et les revirements opportunistes."},
    {name:"Lucie Castets", img:"castets.jpg", text:"√âconomiste", special:"chaos"},
    {name:"Bernard Cazeneuve", img:"cazeneuve.jpg", text:"Ministre sous Hollande : affaires europ√©ennes, budget, int√©rieur puis Premier ministre. R√©sultat : l‚ÄôUE ne tourne plus, le budget est en faillite et la police tue. Un CV id√©al pour Matignon."},
    {name:"G√©rald Darmanin", img:"darmanin.jpg", text:"A fait du chantage √† une femme pour obtenir des relations sexuelles. Un abus de pouvoir, un viol. Toujours ministre depuis 2020."},
    {name:"Fran√ßois Baroin", img:"baroin.jpg", text:"Un √©ternel notable de droite. Historique terne, toujours l√† pour pr√©server ses int√©r√™ts."},
    {name:"Marine Le Pen", img:"lepen.jpg", text:"Saviez-vous qu‚Äôon peut devenir Premi√®re ministre tout en √©tant condamn√©e pour d√©tournement de fonds publics ? Marine Le Pen, elle, le sait."},
    {name:"Bruno Retailleau", img:"retailleau.jpg", text:"Son slogan : ‚ÄòLa France des honn√™tes gens‚Äô. Chef des LR et soutien de Sarkozy, condamn√© pour corruption et financement ill√©gal de campagne. C√¥t√© id√©es : une obsession s√©curitaire et des politiques ouvertement racistes contre les √©trangers et les musulmans."},
    {name:"Rapha√´l Glucksmann", img:"glucksmann.jpg", text:"Un autre Macron est possible."},
    {name:"Catherine Vautrin", img:"vautrin.jpg", text:"Potentielle Premi√®re ministre depuis 2020. Mais... est-ce que ‚Äòpotentielle Premi√®re ministre‚Äô est vraiment un m√©tier ?"},
    {name:"Michel Barnier", img:"barnier.jpg", text:"Politicien", special:"cross"},
    {name:"Olivier Faure", img:"faure.jpg", text:"Chef du PS, soutien fid√®le de Hollande. Jamais frondeur, toujours suiveur, comment peut il se maintenenir debous sans colonne vertebrale ?", special:"faure"},
    {name:"Bruno Le Maire", img:"lemaire.jpg", text:"Longtemps ministre du budget, la France est en faillite. ¬´ Bruno Demande ¬ª beaucoup, mais personne ne l'√©coute."},
    {name:"S√©bastien Lecornu", img:"lecornu.jpg", text:"Issu du m√™me moule que Macron : carri√©riste, technocrate, sans vision pour le peuple."},
    {name:"Christine Lagarde", img:"lagarde.jpg", text:"FMI, aust√©rit√©, crise grecque... Son bilan, c‚Äôest la casse sociale et la soumission aux march√©s."},
    {name:"Laurent Berger", img:"berger.jpg", text:"La CFDT, sous sa direction, a souvent soutenu l‚Äô√âtat et abandonn√© les travailleurs."}
  ];

  const wheel = document.getElementById('wheel');
  const spinBtn = document.getElementById('spinBtn');
  const overlay = document.getElementById('result-overlay');
  const nameEl = document.getElementById('res-name');
  const textEl = document.getElementById('res-text');
  const imgContainer = document.getElementById('img-container');
  const lever = document.getElementById('lever-container'); 
  const hoverName = document.getElementById('hover-name');
  let currentRotation = 0;
  const sliceAngle = 360 / data.length;

  const colors = ["#FF9999","#99CCFF","#99FF99","#FFFF99","#FF99FF","#FFD699","#CC99FF","#99FFFF","#BDE0FE", "#FF9AAA","#FFD1DC","#C0FFB3","#B3E5FF","#E6B3FF","#FFCCB3","#C2B3FF","#FFF0B3"];
  const wheelColors = data.map((_, i) => colors[i % colors.length]);
  wheel.style.background = `conic-gradient(${wheelColors.map((c,i)=>`${c} ${i*sliceAngle}deg ${(i+1)*sliceAngle}deg`).join(",")})`;

  const imgs = [];
  data.forEach((p, i) => {
    const img = document.createElement('img');
    img.src = p.img;
    img.alt = p.name;
    img.className = 'slice-img';
    img.dataset.index = i;
    wheel.appendChild(img);
    imgs.push(img);
    img.onload = positionImages;
    img.addEventListener('click', ()=> showResult(p));
    img.addEventListener('mouseenter', ()=> { hoverName.textContent = p.name; });
    img.addEventListener('mouseleave', ()=> { hoverName.textContent = ''; });
  });

  function positionImages() {
    const w = wheel.clientWidth;
    const center = w / 2;
    const outerRadius = w / 2;
    imgs.forEach((img, i) => {
      const angDeg = i * sliceAngle + sliceAngle / 2;
      const ang = angDeg * Math.PI / 180;
      const radius = outerRadius * 0.7;
      const maxDiameter = 2 * outerRadius * Math.sin(sliceAngle * Math.PI / 360) * 0.5;
      img.style.width = img.style.height = `${maxDiameter}px`;
      const x = center + radius * Math.sin(ang);
      const y = center - radius * Math.cos(ang);
      img.style.left = `${x}px`;
      img.style.top = `${y}px`;
    });
  }
  positionImages();
  window.addEventListener('resize', positionImages);

  function spinWheel() {
    if(spinBtn.disabled) return;
    spinBtn.disabled = true;
    const leverEl = document.getElementById('lever');
    leverEl.style.transform = `rotate(-30deg)`;
    setTimeout(()=>leverEl.style.transform='rotate(0deg)',300);

    const targetIndex = Math.floor(Math.random()*data.length);
    const spins = 5*360;
    const finalAngle = 360 - (targetIndex*sliceAngle + sliceAngle/2);
    const targetRotation = currentRotation + spins + finalAngle - (currentRotation%360);
    currentRotation = targetRotation;

    wheel.style.transform = `rotate(${currentRotation}deg)`;

    const onEnd = ()=>{
      wheel.removeEventListener('transitionend',onEnd);
      showResult(data[targetIndex]);
      spinBtn.disabled = false;
    };
    wheel.addEventListener('transitionend',onEnd);
  }

  function typeWriter(el, text, speed=40) {
    el.textContent = "";
    let i=0;
    function typing() {
      if(i<text.length){
        el.textContent += text.charAt(i);
        i++;
        setTimeout(typing, speed);
      }
    }
    typing();
  }

  function showResult(person){
    imgContainer.style.position="relative";

    if(person.special==="chaos"){
      spinBtn.disabled = true;
      overlay.style.display = "none";
      imgContainer.innerHTML = "";
      document.body.classList.add('shake');

      const chaosScreen = document.createElement('div');
      Object.assign(chaosScreen.style,{
        position:'fixed', top:'0', left:'0', width:'100%', height:'100%',
        background:'rgba(0,0,0,0.9)', display:'flex',
        alignItems:'center', justifyContent:'center',
        zIndex:1000, filter:'grayscale(100%)', flexDirection:'column'
      });

      const macImg = document.createElement('img');
      macImg.src = "mac.png";
      macImg.alt = "Mac";
      macImg.style.width = "200px";
      macImg.style.opacity = "0";
      chaosScreen.appendChild(macImg);
      document.body.appendChild(chaosScreen);

      setTimeout(()=>{ macImg.classList.add("mac-rise"); },200);

      setTimeout(()=>{
        const tempBox = document.createElement('div');
        Object.assign(tempBox.style,{
          marginTop:"20px",
          background:'white', padding:'20px', borderRadius:'10px',
          zIndex:1001, textAlign:'center', fontSize:'1.2rem',
          boxShadow:'0 4px 10px rgba(0,0,0,0.3)'
        });
        const h2=document.createElement("h2");
        h2.textContent=person.name;
        const p=document.createElement("p");
        tempBox.appendChild(h2);
        tempBox.appendChild(p);
        chaosScreen.appendChild(tempBox);

        typeWriter(p,"Le r√©sultat de la loterie c'est comme le r√©sultat des √©lections, on n‚Äôest pas oblig√© de le respecter.");

        setTimeout(()=>{
          document.body.removeChild(chaosScreen);
          document.body.classList.remove('shake');
          spinBtn.disabled = false;
          spinWheel();
        },6000);
      },2000);
      return;
    }

    overlay.style.display='flex';
    imgContainer.innerHTML=`<img src="${person.img}" alt="${person.name}">`;
    nameEl.textContent = person.name;
    textEl.textContent = person.text;
    textEl.style.color="black";

    if(person.special==="cross"){
      const cross = document.createElement('div');
      cross.style.position="absolute";
      cross.style.top="0"; cross.style.left="0";
      cross.style.width="100%"; cross.style.height="100%";
      cross.style.pointerEvents="none";

      const line1=document.createElement('div');
      const line2=document.createElement('div');
      [line1,line2].forEach(line=>{
        line.style.position="absolute";
        line.style.width="6px"; line.style.height="100%";
        line.style.background="red"; line.style.top="0";
        line.style.left="50%"; line.style.transformOrigin="center";
      });
      line1.style.transform="translateX(-50%) rotate(45deg)";
      line2.style.transform="translateX(-50%) rotate(-45deg)";
      cross.appendChild(line1);
      cross.appendChild(line2);
      imgContainer.appendChild(cross);

      textEl.textContent="On a d√©j√† essay√© !";
      textEl.style.color="red";
    }

    if(person.special==="faure"){
      imgContainer.innerHTML=`<img src="hollande.jpg" alt="Hollande">`;
      setTimeout(()=>{imgContainer.innerHTML=`<img src="${person.img}" alt="${person.name}">`;},1000);
    }
  }

  document.getElementById('closeBtn').addEventListener('click',()=>{overlay.style.display='none';});
  spinBtn.addEventListener('click',spinWheel);
  lever.addEventListener('click', spinWheel);
});
</script>
</body>
</html>
